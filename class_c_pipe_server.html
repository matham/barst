<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Barst: CPipeServer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Barst
   &#160;<span id="projectnumber">2.0</span>
   </div>
   <div id="projectbrief">A server that controls lab hardware.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_c_pipe_server-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CPipeServer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="named_01pipes_8h_source.html">named pipes.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CPipeServer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_c_pipe_server.png" usemap="#CPipeServer_map" alt=""/>
  <map id="CPipeServer_map" name="CPipeServer_map">
<area href="class_c_comm.html" alt="CComm" shape="rect" coords="0,0,85,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af30ce7120e1108ea720a5c20e7a4e5bf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_pipe_server.html#af30ce7120e1108ea720a5c20e7a4e5bf">Init</a> (const TCHAR szPipe[], int nPipes, DWORD dwBuffSizeIn, DWORD dwBuffSizeOut, <a class="el" href="class_c_device.html">CDevice</a> *cDevice, <a class="el" href="class_c_log_buffer.html">CLogBuffer</a> *cLogBuffer)</td></tr>
<tr class="separator:af30ce7120e1108ea720a5c20e7a4e5bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef173a92816e84ecb92122268c86e0de"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_pipe_server.html#aef173a92816e84ecb92122268c86e0de">SendData</a> (const <a class="el" href="struct_s_data.html">SData</a> *pData, __int64 llId)</td></tr>
<tr class="separator:aef173a92816e84ecb92122268c86e0de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6da9ec1907470b3ce561ba80cf642ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_pipe_server.html#ae6da9ec1907470b3ce561ba80cf642ac">Close</a> ()</td></tr>
<tr class="separator:ae6da9ec1907470b3ce561ba80cf642ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedceaa0cb29220381116e2a63a688388"><td class="memItemLeft" align="right" valign="top"><a id="aedceaa0cb29220381116e2a63a688388"></a>
DWORD&#160;</td><td class="memItemRight" valign="bottom"><b>ThreadProc</b> ()</td></tr>
<tr class="separator:aedceaa0cb29220381116e2a63a688388"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_attribs_class_c_comm"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_class_c_comm')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="class_c_comm.html">CComm</a></td></tr>
<tr class="memitem:a1856bca3745123d3823d821b3037d36c inherit pro_attribs_class_c_comm"><td class="memItemLeft" align="right" valign="top"><a id="a1856bca3745123d3823d821b3037d36c"></a>
<a class="el" href="class_c_device.html">CDevice</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>m_pcDevice</b></td></tr>
<tr class="separator:a1856bca3745123d3823d821b3037d36c inherit pro_attribs_class_c_comm"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b7811a817865e19960f610bb8ca4a91 inherit pro_attribs_class_c_comm"><td class="memItemLeft" align="right" valign="top"><a id="a7b7811a817865e19960f610bb8ca4a91"></a>
<a class="el" href="class_c_log_buffer.html">CLogBuffer</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>m_pcLogBuffer</b></td></tr>
<tr class="separator:a7b7811a817865e19960f610bb8ca4a91 inherit pro_attribs_class_c_comm"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3633fe46371e3eddd4969e64d188511 inherit pro_attribs_class_c_comm"><td class="memItemLeft" align="right" valign="top"><a id="ac3633fe46371e3eddd4969e64d188511"></a>
<a class="el" href="class_c_mem_pool.html">CMemPool</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>m_pcMemPool</b></td></tr>
<tr class="separator:ac3633fe46371e3eddd4969e64d188511 inherit pro_attribs_class_c_comm"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implememts named pipes as a comm. Communication is async so that one thread is doing all the work async. But, you can have multiple clients connecting simultaneuosly. You call init to start the server and close to stop it. Closing stopps all current communications. </p>

<p class="definition">Definition at line <a class="el" href="named_01pipes_8h_source.html#l00098">98</a> of file <a class="el" href="named_01pipes_8h_source.html">named pipes.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ae6da9ec1907470b3ce561ba80cf642ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6da9ec1907470b3ce561ba80cf642ac">&#9670;&nbsp;</a></span>Close()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CPipeServer::Close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Stops all communication with this comm, terminates all threads and returns it to its original state. Any data waiting to be sent is not sent but Result() is called on that data. </p>

<p>Implements <a class="el" href="class_c_comm.html#ac9ac6aab07e0bea55d71507775b72690">CComm</a>.</p>

<p class="definition">Definition at line <a class="el" href="named_01pipes_8cpp_source.html#l00402">402</a> of file <a class="el" href="named_01pipes_8cpp_source.html">named pipes.cpp</a>.</p>

</div>
</div>
<a id="af30ce7120e1108ea720a5c20e7a4e5bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af30ce7120e1108ea720a5c20e7a4e5bf">&#9670;&nbsp;</a></span>Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int CPipeServer::Init </td>
          <td>(</td>
          <td class="paramtype">const TCHAR&#160;</td>
          <td class="paramname"><em>szPipe</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nPipes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DWORD&#160;</td>
          <td class="paramname"><em>dwBuffSizeIn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DWORD&#160;</td>
          <td class="paramname"><em>dwBuffSizeOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_device.html">CDevice</a> *&#160;</td>
          <td class="paramname"><em>cDevice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_log_buffer.html">CLogBuffer</a> *&#160;</td>
          <td class="paramname"><em>cLogBuffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>szPipe is the pipe to be used. nPipes is the maximum number of pipes instances that can be open at once. For instance, if it's 1, only one user can connect at any time. The maximum actually possible instances is in the 30s. If all the pipes are connected to users, another client trying to connect will get a busy error reply. dwBuffSizeIn is the max buffer that can be written by the client to the server at once. dwBuffSizeOut is the max buffer that can be read by the client and written by the server at once. cDevice is the device that this pipe will call when a client writes to the pipe. cLogBuffer is NULL currently, but would contain a log object. If g_llMaxQueueBytes is not -1, data which would result in larger values than g_llMaxQueueBytes will be simply discarded without error. </p>

<p class="definition">Definition at line <a class="el" href="named_01pipes_8cpp_source.html#l00075">75</a> of file <a class="el" href="named_01pipes_8cpp_source.html">named pipes.cpp</a>.</p>

</div>
</div>
<a id="aef173a92816e84ecb92122268c86e0de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef173a92816e84ecb92122268c86e0de">&#9670;&nbsp;</a></span>SendData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int CPipeServer::SendData </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_s_data.html">SData</a> *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__int64&#160;</td>
          <td class="paramname"><em>llId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sends data to a user identified by llId. Function returns TRUE if it failed and FALSE otherwise. At some point it could be extended to return an error code if needed. </p>

<p>Implements <a class="el" href="class_c_comm.html#a0cbaae3b15b7023519475d1a8dc44de8">CComm</a>.</p>

<p class="definition">Definition at line <a class="el" href="named_01pipes_8cpp_source.html#l00437">437</a> of file <a class="el" href="named_01pipes_8cpp_source.html">named pipes.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 25 2019 03:33:37 for Barst by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
