<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Barst: SADCData Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Barst
   &#160;<span id="projectnumber">2.0</span>
   </div>
   <div id="projectbrief">A server that controls lab hardware.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="struct_s_a_d_c_data-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SADCData Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="cpl_01defs_8h_source.html">cpl defs.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ab4edd15f2f557887c7ab40422199ee1a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_s_base_in.html">SBaseIn</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_a_d_c_data.html#ab4edd15f2f557887c7ab40422199ee1a">sDataBase</a></td></tr>
<tr class="separator:ab4edd15f2f557887c7ab40422199ee1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3caf17353c73b1a61b0b08662d73cddb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_s_base.html">SBase</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_a_d_c_data.html#a3caf17353c73b1a61b0b08662d73cddb">sBase</a></td></tr>
<tr class="separator:a3caf17353c73b1a61b0b08662d73cddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fddb8822614c47953efe9772c55724c"><td class="memItemLeft" align="right" valign="top">DWORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_a_d_c_data.html#a1fddb8822614c47953efe9772c55724c">dwPos</a></td></tr>
<tr class="separator:a1fddb8822614c47953efe9772c55724c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdf643fac97210ebc2a9c0e982575a8f"><td class="memItemLeft" align="right" valign="top">DWORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_a_d_c_data.html#afdf643fac97210ebc2a9c0e982575a8f">dwCount1</a></td></tr>
<tr class="separator:afdf643fac97210ebc2a9c0e982575a8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d59076748a9efea45d9d709ce2ceeb8"><td class="memItemLeft" align="right" valign="top"><a id="a7d59076748a9efea45d9d709ce2ceeb8"></a>
DWORD&#160;</td><td class="memItemRight" valign="bottom"><b>dwChan2Start</b></td></tr>
<tr class="separator:a7d59076748a9efea45d9d709ce2ceeb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a008c8f0c80c0932671498e4e698928bc"><td class="memItemLeft" align="right" valign="top"><a id="a008c8f0c80c0932671498e4e698928bc"></a>
DWORD&#160;</td><td class="memItemRight" valign="bottom"><b>dwCount2</b></td></tr>
<tr class="separator:a008c8f0c80c0932671498e4e698928bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c7abdb81eef049c0b1f414953a6c0c8"><td class="memItemLeft" align="right" valign="top">DWORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_a_d_c_data.html#a1c7abdb81eef049c0b1f414953a6c0c8">dwChan1S</a></td></tr>
<tr class="separator:a1c7abdb81eef049c0b1f414953a6c0c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28919b1bb09c49021b2e86e8105b00df"><td class="memItemLeft" align="right" valign="top"><a id="a28919b1bb09c49021b2e86e8105b00df"></a>
DWORD&#160;</td><td class="memItemRight" valign="bottom"><b>dwChan2S</b></td></tr>
<tr class="separator:a28919b1bb09c49021b2e86e8105b00df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44bbbc97fd7b09959d30301745418732"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_a_d_c_data.html#a44bbbc97fd7b09959d30301745418732">fSpaceFull</a></td></tr>
<tr class="separator:a44bbbc97fd7b09959d30301745418732"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11c457591adec69818ab6c66fdd360b8"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_a_d_c_data.html#a11c457591adec69818ab6c66fdd360b8">fTimeWorked</a></td></tr>
<tr class="separator:a11c457591adec69818ab6c66fdd360b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a254c2dc8cae9b7eff914fc2b0aa1f323"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_a_d_c_data.html#a254c2dc8cae9b7eff914fc2b0aa1f323">fDataRate</a></td></tr>
<tr class="separator:a254c2dc8cae9b7eff914fc2b0aa1f323"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d2180e441a8c1100bf5300a1f89e865"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_a_d_c_data.html#a4d2180e441a8c1100bf5300a1f89e865">ucError</a></td></tr>
<tr class="separator:a4d2180e441a8c1100bf5300a1f89e865"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76219b1b954f9d5c01446a2978525cc5"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s_a_d_c_data.html#a76219b1b954f9d5c01446a2978525cc5">dStartTime</a></td></tr>
<tr class="separator:a76219b1b954f9d5c01446a2978525cc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The struct that the ADC device sends to the client filled with DWORD data read from the ADC. The DWORD data immidiatly follows this struct. </p>

<p class="definition">Definition at line <a class="el" href="cpl_01defs_8h_source.html#l00375">375</a> of file <a class="el" href="cpl_01defs_8h_source.html">cpl defs.h</a>.</p>
</div><h2 class="groupheader">Member Data Documentation</h2>
<a id="a76219b1b954f9d5c01446a2978525cc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76219b1b954f9d5c01446a2978525cc5">&#9670;&nbsp;</a></span>dStartTime</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double SADCData::dStartTime</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>See dwChan1S description. </p>

<p class="definition">Definition at line <a class="el" href="cpl_01defs_8h_source.html#l00437">437</a> of file <a class="el" href="cpl_01defs_8h_source.html">cpl defs.h</a>.</p>

</div>
</div>
<a id="a1c7abdb81eef049c0b1f414953a6c0c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c7abdb81eef049c0b1f414953a6c0c8">&#9670;&nbsp;</a></span>dwChan1S</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DWORD SADCData::dwChan1S</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Each USB transection with the ADC device gets time stamped (uncertainty of the time stamp is a few ms, depending on the USB communication uncertainty). The time stamp is given in the dStartTime parameter. Because the data in one USB transection can be broken down and sent in multiple packets based on the dwDataPerTrans parameter. The timestamp then is associated with a particular data point within the buffer, because that data point would have been the first data point read in a new USB transection. dwChan1S tells you the index of this data point for channel 1 and dwChan2S is the index for channel 2 (they should be very close to each other). If this packet doesn't have a data point that was timestamped, e.g. because this is the second packet of a single USB transection then dStartTime will be zero. </p>

<p class="definition">Definition at line <a class="el" href="cpl_01defs_8h_source.html#l00416">416</a> of file <a class="el" href="cpl_01defs_8h_source.html">cpl defs.h</a>.</p>

</div>
</div>
<a id="afdf643fac97210ebc2a9c0e982575a8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdf643fac97210ebc2a9c0e982575a8f">&#9670;&nbsp;</a></span>dwCount1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DWORD SADCData::dwCount1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Everytime that we send this struct we always send this many bytes: sizeof(SADCData)+sizeof(DWORD)*SADCInit.dwDataPerTrans*(<a class="el" href="struct_s_a_d_c_init.html#a2834ee796e4d2c8d2bd03bf2de9c5bf4">SADCInit.bChan2</a>?2:1), that is because we are expected to send dwDataPerTrans data points per channel for each transmission we always send the same amount of data. However sometimes, the last packet might not have enough data to fill up the full dwDataPerTrans data points. Consequently, even though we still send the same number of bytes, dwCount1 and dwCount2 tell you how much actual data points is in this data buffer.</p>
<p>Immidiatly following the <a class="el" href="struct_s_a_d_c_data.html">SADCData</a> struct follows channel 1 data, the total buffer length for channel 1 is dwDataPerTrans, the first dwCount1 points of which is the actual channel 1 data. dwChan2Start tells you where channel 2 data starts. Because channel 2 data follows channel 1 data, dwChan2Start must always be equal to dwDataPerTrans (the max number of data points for channel 1). If channel 2 is active, the buffer length in data point units is also dwDataPerTrans. So dwCount2 tells you how many actual data points is in this buffer. </p>

<p class="definition">Definition at line <a class="el" href="cpl_01defs_8h_source.html#l00406">406</a> of file <a class="el" href="cpl_01defs_8h_source.html">cpl defs.h</a>.</p>

</div>
</div>
<a id="a1fddb8822614c47953efe9772c55724c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fddb8822614c47953efe9772c55724c">&#9670;&nbsp;</a></span>dwPos</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DWORD SADCData::dwPos</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For each <a class="el" href="struct_s_a_d_c_data.html">SADCData</a> struct we send to the client, dwPos is incremented by one. This allows to keep track if user lost a packet. </p>

<p class="definition">Definition at line <a class="el" href="cpl_01defs_8h_source.html#l00393">393</a> of file <a class="el" href="cpl_01defs_8h_source.html">cpl defs.h</a>.</p>

</div>
</div>
<a id="a254c2dc8cae9b7eff914fc2b0aa1f323"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a254c2dc8cae9b7eff914fc2b0aa1f323">&#9670;&nbsp;</a></span>fDataRate</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float SADCData::fDataRate</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Estimates the data rate of the ADC. It should be near the ADC sampling rate. </p>

<p class="definition">Definition at line <a class="el" href="cpl_01defs_8h_source.html#l00429">429</a> of file <a class="el" href="cpl_01defs_8h_source.html">cpl defs.h</a>.</p>

</div>
</div>
<a id="a44bbbc97fd7b09959d30301745418732"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44bbbc97fd7b09959d30301745418732">&#9670;&nbsp;</a></span>fSpaceFull</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float SADCData::fSpaceFull</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>As mentioned in fUSBBuffToUse, we can select different size for the buffer length that is written to the USB device at once. If it's very small, than most of the buffer read would be full with ADC data. If it's very large, then it should be mostly empty because it's more efficient. This parameter tells you the percentage of the buffer that was filled with ADC data read. If it's close to 100, that means you're close to losing data because the buffer might be too small or clock too slow to be able to read the data fast enough. So you should increase the buffer size or set a smaller smapling rate in the ADC hardware device. </p>

<p class="definition">Definition at line <a class="el" href="cpl_01defs_8h_source.html#l00424">424</a> of file <a class="el" href="cpl_01defs_8h_source.html">cpl defs.h</a>.</p>

</div>
</div>
<a id="a11c457591adec69818ab6c66fdd360b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11c457591adec69818ab6c66fdd360b8">&#9670;&nbsp;</a></span>fTimeWorked</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float SADCData::fTimeWorked</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tells you the percentage of time from one read to another that the ADC thread spent extracting the ADC data from the buffer. </p>

<p class="definition">Definition at line <a class="el" href="cpl_01defs_8h_source.html#l00427">427</a> of file <a class="el" href="cpl_01defs_8h_source.html">cpl defs.h</a>.</p>

</div>
</div>
<a id="a3caf17353c73b1a61b0b08662d73cddb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3caf17353c73b1a61b0b08662d73cddb">&#9670;&nbsp;</a></span>sBase</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_s_base.html">SBase</a> SADCData::sBase</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>sBase.eType is eADCData and sBase.dwSize is sizeof(SADCData)-sizeof(<a class="el" href="struct_s_base_in.html">SBaseIn</a>). </p>

<p class="definition">Definition at line <a class="el" href="cpl_01defs_8h_source.html#l00390">390</a> of file <a class="el" href="cpl_01defs_8h_source.html">cpl defs.h</a>.</p>

</div>
</div>
<a id="ab4edd15f2f557887c7ab40422199ee1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4edd15f2f557887c7ab40422199ee1a">&#9670;&nbsp;</a></span>sDataBase</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_s_base_in.html">SBaseIn</a> SADCData::sDataBase</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>According to the rules, each communication starts with an SBaseIn/Out and is possibly followed by an <a class="el" href="struct_s_base.html">SBase</a> and other structs. In ordeer to be able to send ADC more easily all these structs are included at once in this <a class="el" href="struct_s_a_d_c_data.html">SADCData</a> struct. sDataBase is the <a class="el" href="struct_s_base_in.html">SBaseIn</a>, sBase is the <a class="el" href="struct_s_base.html">SBase</a> struct and the stuff following is considered as the struct following the <a class="el" href="struct_s_base.html">SBase</a> struct.</p>
<p>For this struct, sDataBase.nError is not an error code, instead, the lower 16 bits indicate how many times the data the ADC sent to the USB bus was bad. The upper 16 bits in nError indicates how many times the ADC device overflowed, i.e. how many times the USB bus was too slow to collect the data from the ADC device and the ADC device therefore overwrote data.</p>
<p>eType should be eTrigger. </p>

<p class="definition">Definition at line <a class="el" href="cpl_01defs_8h_source.html#l00388">388</a> of file <a class="el" href="cpl_01defs_8h_source.html">cpl defs.h</a>.</p>

</div>
</div>
<a id="a4d2180e441a8c1100bf5300a1f89e865"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d2180e441a8c1100bf5300a1f89e865">&#9670;&nbsp;</a></span>ucError</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char SADCData::ucError</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>When we read from the ADC status register, we get additional error info. Bit 0 (for channel 1) and/or bit 4 (for channel 2) is set if the input voltage sensed by the ADC is out of range, e.g. it's outside of the +/- 20v range if that's the allowable range. Bit 2 (for channel 1) and/or bit 6 (for channel 2) is set if the voltage reference on the chip is not sensed. This simply means there's a hardware error. </p>

<p class="definition">Definition at line <a class="el" href="cpl_01defs_8h_source.html#l00435">435</a> of file <a class="el" href="cpl_01defs_8h_source.html">cpl defs.h</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 25 2019 03:33:37 for Barst by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
